:root{
    --chat-screen-top-bar: 60px;
    --chat-screen-bottom-bar-focused: 60px;
    --chat-screen-bottom-bar: calc(var(--chat-screen-bottom-bar-focused) + env(safe-area-inset-bottom, 20px));
    --chat-screen-bottom-bar-padding: 10px;
    --chat-screen-send-button-size: calc(var(--chat-screen-bottom-bar-focused) - 2 * var(--chat-screen-bottom-bar-padding));
}

main{
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: var(--chat-screen-top-bar) 1fr auto;
}

main>div{
    display: grid;
    justify-content: center;
    align-items: center;
    grid-template-columns: 1fr var(--chat-screen-top-bar);
    grid-template-rows: 1fr;
    background-color: var(--theme-color-1);
    padding-left: 15px;
}

main>div>label{
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3E%3Cpath d='M20,22.5c-1.4,0-2.5-1.1-2.5-2.5s1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5S21.4,22.5,20,22.5z M20,18.5c-.8,0-1.5,.7-1.5,1.5s.7,1.5,1.5,1.5s1.5-.7,1.5-1.5S20.8,18.5,20,18.5z'/%3E%3Cpath d='M20.7,28.5h-1.3c-.6,0-1.2-.5-1.2-1.2v-1c-.4-.1-.8-.3-1.2-.5c-.1,0-.2,0-.2,0l-.7,.7c-.4,.4-1.2,.4-1.7,0l-1-1c-.5-.5-.5-1.2,0-1.7l.7-.7c.1-.1,0-.2,0-.2c-.2-.3-.3-.7-.4-1c0-.1-.1-.1-.2-.1h-.9c-.6,0-1.2-.5-1.2-1.2v-1.3c0-.6,.5-1.2,1.2-1.2h.9c.1,0,.1-.1,.2-.1c.1-.4,.3-.7,.4-1c0-.1,0-.1,0-.2l-.7-.7c-.5-.5-.5-1.2,0-1.7l1-1c.4-.4,1.2-.4,1.7,0l.7,.7c.1,.1,.1,.1,.2,0c.3-.2,.7-.3,1-.4c.1,0,.1-.1,.1-.2v-.9c0-.6,.5-1.2,1.2-1.2h1.3c.6,0,1.2,.5,1.2,1.2v.9c0,.1,.1,.1,.1,.2c.3,.1,.7,.3,1,.4c.1,0,.2,0,.2,0l.7-.7c.4-.4,1.2-.4,1.7,0l1,1c.5,.5,.5,1.2,0,1.7l-.7,.7c-.1,.1,0,.2,0,.2c.2,.3,.3,.7,.4,1c0,.1,.1,.1,.2,.1h.9c.6,0,1.2,.5,1.2,1.2v1.3c0,.6-.5,1.2-1.2,1.2h-.9c-.1,0-.1,.1-.2,.1c-.1,.4-.3,.7-.4,1c0,.1,0,.1,0,.2l.7,.7c.5,.5,.5,1.2,0,1.7l-1,1c-.4,.4-1.2,.4-1.7,0l-.7-.7c-.1-.1-.1-.1-.2,0c-.3,.2-.7,.3-1,.4c-.1,0-.1,.1-.1,.2v.9C21.8,28,21.3,28.5,20.7,28.5z M16.9,24.8c.2,0,.4,0,.6,.1c.4,.2,.9,.4,1.3,.5c.2,.1,.4,.3,.4,.5v1.4c0,.1,.1,.2,.2,.2h1.3c.1,0,.2-.1,.2-.2v-.9c0-.5,.3-1,.8-1.1c.3-.1,.6-.2,.9-.4c.5-.2,1-.2,1.4,.2l.7,.7c.1,.1,.2,.1,.2,0l1-1c.1-.1,.1-.2,0-.2l-.7-.7c-.4-.4-.4-.9-.2-1.4c.1-.3,.3-.6,.4-.9c.2-.5,.6-.8,1.1-.8h.9c.1,0,.2-.1,.2-.2v-1.3c0-.1-.1-.2-.2-.2h-.9c-.5,0-1-.3-1.1-.8c-.1-.3-.2-.6-.4-.9c-.2-.5-.2-1,.2-1.4l.7-.7c.1-.1,.1-.2,0-.2l-1-1c-.1-.1-.2-.1-.2,0l-.7,.7c-.4,.3-.9,.4-1.4,.2c-.3-.1-.6-.3-.9-.4c-.5-.2-.8-.6-.8-1.1v-.9c0-.1-.1-.2-.2-.2h-1.3c-.1,0-.2,.1-.2,.2v.9c0,.5-.3,1-.8,1.1c-.3,.1-.6,.2-.9,.4c-.5,.2-1,.2-1.4-.2l-.7-.7c-.1-.1-.2-.1-.2,0l-1,1c-.1,.1-.1,.2,0,.2l.7,.7c.4,.4,.4,.9,.2,1.4c-.1,.3-.3,.6-.4,.9c-.2,.5-.6,.8-1.1,.8h-.9c-.1,0-.2,.1-.2,.2v1.3c0,.1,.1,.2,.2,.2h.9c.5,0,1,.3,1.1,.8c.1,.3,.2,.6,.4,.9c.2,.5,.2,1-.2,1.4l-.7,.7c-.1,.1-.1,.2,0,.2l1,1c.1,.1,.2,.1,.2,0l.7-.7C16.3,24.9,16.6,24.8,16.9,24.8z'/%3E%3C/svg%3E");
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3E%3Cpath d='M20,22.5c-1.4,0-2.5-1.1-2.5-2.5s1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5S21.4,22.5,20,22.5z M20,18.5c-.8,0-1.5,.7-1.5,1.5s.7,1.5,1.5,1.5s1.5-.7,1.5-1.5S20.8,18.5,20,18.5z'/%3E%3Cpath d='M20.7,28.5h-1.3c-.6,0-1.2-.5-1.2-1.2v-1c-.4-.1-.8-.3-1.2-.5c-.1,0-.2,0-.2,0l-.7,.7c-.4,.4-1.2,.4-1.7,0l-1-1c-.5-.5-.5-1.2,0-1.7l.7-.7c.1-.1,0-.2,0-.2c-.2-.3-.3-.7-.4-1c0-.1-.1-.1-.2-.1h-.9c-.6,0-1.2-.5-1.2-1.2v-1.3c0-.6,.5-1.2,1.2-1.2h.9c.1,0,.1-.1,.2-.1c.1-.4,.3-.7,.4-1c0-.1,0-.1,0-.2l-.7-.7c-.5-.5-.5-1.2,0-1.7l1-1c.4-.4,1.2-.4,1.7,0l.7,.7c.1,.1,.1,.1,.2,0c.3-.2,.7-.3,1-.4c.1,0,.1-.1,.1-.2v-.9c0-.6,.5-1.2,1.2-1.2h1.3c.6,0,1.2,.5,1.2,1.2v.9c0,.1,.1,.1,.1,.2c.3,.1,.7,.3,1,.4c.1,0,.2,0,.2,0l.7-.7c.4-.4,1.2-.4,1.7,0l1,1c.5,.5,.5,1.2,0,1.7l-.7,.7c-.1,.1,0,.2,0,.2c.2,.3,.3,.7,.4,1c0,.1,.1,.1,.2,.1h.9c.6,0,1.2,.5,1.2,1.2v1.3c0,.6-.5,1.2-1.2,1.2h-.9c-.1,0-.1,.1-.2,.1c-.1,.4-.3,.7-.4,1c0,.1,0,.1,0,.2l.7,.7c.5,.5,.5,1.2,0,1.7l-1,1c-.4,.4-1.2,.4-1.7,0l-.7-.7c-.1-.1-.1-.1-.2,0c-.3,.2-.7,.3-1,.4c-.1,0-.1,.1-.1,.2v.9C21.8,28,21.3,28.5,20.7,28.5z M16.9,24.8c.2,0,.4,0,.6,.1c.4,.2,.9,.4,1.3,.5c.2,.1,.4,.3,.4,.5v1.4c0,.1,.1,.2,.2,.2h1.3c.1,0,.2-.1,.2-.2v-.9c0-.5,.3-1,.8-1.1c.3-.1,.6-.2,.9-.4c.5-.2,1-.2,1.4,.2l.7,.7c.1,.1,.2,.1,.2,0l1-1c.1-.1,.1-.2,0-.2l-.7-.7c-.4-.4-.4-.9-.2-1.4c.1-.3,.3-.6,.4-.9c.2-.5,.6-.8,1.1-.8h.9c.1,0,.2-.1,.2-.2v-1.3c0-.1-.1-.2-.2-.2h-.9c-.5,0-1-.3-1.1-.8c-.1-.3-.2-.6-.4-.9c-.2-.5-.2-1,.2-1.4l.7-.7c.1-.1,.1-.2,0-.2l-1-1c-.1-.1-.2-.1-.2,0l-.7,.7c-.4,.3-.9,.4-1.4,.2c-.3-.1-.6-.3-.9-.4c-.5-.2-.8-.6-.8-1.1v-.9c0-.1-.1-.2-.2-.2h-1.3c-.1,0-.2,.1-.2,.2v.9c0,.5-.3,1-.8,1.1c-.3,.1-.6,.2-.9,.4c-.5,.2-1,.2-1.4-.2l-.7-.7c-.1-.1-.2-.1-.2,0l-1,1c-.1,.1-.1,.2,0,.2l.7,.7c.4,.4,.4,.9,.2,1.4c-.1,.3-.3,.6-.4,.9c-.2,.5-.6,.8-1.1,.8h-.9c-.1,0-.2,.1-.2,.2v1.3c0,.1,.1,.2,.2,.2h.9c.5,0,1,.3,1.1,.8c.1,.3,.2,.6,.4,.9c.2,.5,.2,1-.2,1.4l-.7,.7c-.1,.1-.1,.2,0,.2l1,1c.1,.1,.2,.1,.2,0l.7-.7C16.3,24.9,16.6,24.8,16.9,24.8z'/%3E%3C/svg%3E");
    background-color: var(--font-color);
    cursor: pointer;
}

@media (hover: hover){
    main>div>label:hover{
        background-color: var(--theme-color-3);
    }
}

main>div>label:focus, main>div>label:active{
    background-color: var(--theme-color-3);
}

main>article{
    padding: 0 10px;
    overflow-y: scroll;
}

main>article>section{
    width: max-content;
    max-width: 60%;
    background-color: var(--theme-color-2);
    border-radius: 15px 15px 15px 0;
    margin-top: 10px;
    margin-bottom: 10px;
    margin-left: 10px;
    margin-right: auto;
    padding: 10px;
}

main>article>section.ownMessage{
    margin-left: auto;
    margin-right: 10px;
    border-radius: 15px 15px 0 15px;
}

main>article>section>p{
    margin: 0;
}

main>article>section>p>code{
    font-family: 'Courier New', Courier, monospace;
}

main>article>section>time{
    float: right;
}

main>article+button{
    grid-column: 1 / span 1;
    grid-row: 2 / span 1;
    position: absolute;
    right: 0;
    bottom: 10px;
    width: 60px;
    height: 40px;
    border-radius: 15px 0 0 15px;
    border: none;
    background-color: var(--theme-color-1);
    cursor: pointer;
    outline: none;
}

main>article+button::after{
    content: "";
    display: block;
    position: absolute;
    left: 5px;
    top: 0;
    height: 100%;
    aspect-ratio: 1 / 1;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath stroke-linecap='round' stroke='%23000' fill='%230000' d='M 4 8L12 16L20 8'/%3E%3C/svg%3E");
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath stroke-linecap='round' stroke='%23000' fill='%230000' d='M 4 8L12 16L20 8'/%3E%3C/svg%3E");
    background-color: var(--font-color);
}

@media (hover: hover){
    main>article+button:hover::after{
        background-color: var(--theme-color-3);
    }
}

main>article+button:focus::after, main>article+button:active::after{
    background-color: var(--theme-color-3);
}

main>form{
    display: grid;
    justify-content: center;
    align-items: center;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    grid-auto-columns: auto;
    grid-auto-flow: column;
    height: var(--chat-screen-bottom-bar);
    background-color: var(--theme-color-1);
    padding: var(--chat-screen-bottom-bar-padding) var(--chat-screen-bottom-bar-padding) calc(var(--chat-screen-bottom-bar-padding) + env(safe-area-inset-bottom, 20px)) var(--chat-screen-bottom-bar-padding);
    gap: var(--chat-screen-bottom-bar-padding);
}

main>form:focus-within{
    height: var(--chat-screen-bottom-bar-focused);
}

main>form>input{
    width: 100%;
    padding: 5px;
    border-radius: 15px;
    outline: none;
    border: none;
    background-color: var(--theme-color-0);
}

main>form>input:placeholder-shown+button{
    display: none;
}

main>form>button{
    position: relative;
    width: var(--chat-screen-send-button-size);
    height: var(--chat-screen-send-button-size);
    background-color: var(--theme-color-0);
    border-radius: 50%;
    border: none;
    outline: none;
    cursor: pointer;
}

@media (hover: hover){
    main>form>button:hover{
        background-color: var(--theme-color-3);
    }
}

main>form>button:focus, main>form>button:active{
    background-color: var(--theme-color-3);
}

main>form>button::after{
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    display: block;
    content: "";
    aspect-ratio: 1 / 1;
    height: 70%;
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M2,3v7.8L18,12L2,13.2V21l20-9L2,3z'/%3E%3C/svg%3E");
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M2,3v7.8L18,12L2,13.2V21l20-9L2,3z'/%3E%3C/svg%3E");
    mask-size: cover;
    -webkit-mask-size: cover;
    mask-position: center center;
    -webkit-mask-position: center center;
    background-color: var(--font-color);
}
